# ðŸ”„ Payout System Flow Diagram

## Complete Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER SELECTS PICKS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SelectedPlayersSummary.tsx                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. User selects play type: [Power Play] or [Flex Play]       â”‚ â”‚
â”‚  â”‚ 2. User enters entry amount: $10.00                          â”‚ â”‚
â”‚  â”‚ 3. PayoutCalculator computes potential payout                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     payoutCalculator.ts                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Input:                                                        â”‚ â”‚
â”‚  â”‚   - picks: SelectedPlayer[]                                  â”‚ â”‚
â”‚  â”‚   - playType: 'power' | 'flex'                               â”‚ â”‚
â”‚  â”‚   - entryAmount: number                                      â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Process:                                                      â”‚ â”‚
â”‚  â”‚   1. Remove pushes (status === 'push')                       â”‚ â”‚
â”‚  â”‚   2. Count active picks                                      â”‚ â”‚
â”‚  â”‚   3. If Power Play:                                          â”‚ â”‚
â”‚  â”‚      - Check for any loss â†’ 0x                               â”‚ â”‚
â”‚  â”‚      - Lookup POWER_PLAY_PAYOUTS[activeCount]                â”‚ â”‚
â”‚  â”‚   4. If Flex Play:                                           â”‚ â”‚
â”‚  â”‚      - Count wins in active picks                            â”‚ â”‚
â”‚  â”‚      - Lookup FLEX_PLAY_PAYOUTS[activeCount][winCount]       â”‚ â”‚
â”‚  â”‚   5. Apply modifiers (Demon/Goblin - future)                 â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Output: PayoutResult                                         â”‚ â”‚
â”‚  â”‚   - multiplier: 37.5                                         â”‚ â”‚
â”‚  â”‚   - payoutAmount: $375.00                                    â”‚ â”‚
â”‚  â”‚   - activePickCount: 5 (6 - 1 push)                          â”‚ â”‚
â”‚  â”‚   - isWinner: true                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PayoutDisplay.tsx                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Potential Payout: 37.5x = $375.00           â”‚ â”‚
â”‚  â”‚                  5 picks (6 - 1 push)                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER SUBMITS LINEUP                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Submit to API:                                               â”‚ â”‚
â”‚  â”‚   {                                                          â”‚ â”‚
â”‚  â”‚     picks: [...],                                            â”‚ â”‚
â”‚  â”‚     playType: 'power',                                       â”‚ â”‚
â”‚  â”‚     entryFee: 10,                                            â”‚ â”‚
â”‚  â”‚     potentialPayout: 375,                                    â”‚ â”‚
â”‚  â”‚     email: 'user@email.com'                                  â”‚ â”‚
â”‚  â”‚   }                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND SAVES LINEUP                        â”‚
â”‚                          status: 'pending'                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                         â° GAMES COMPLETE
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      resultEvaluator.ts                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Fetch actual game stats from NBA API                      â”‚ â”‚
â”‚  â”‚ 2. Compare actual vs projected for each pick:               â”‚ â”‚
â”‚  â”‚    - LeBron: 28.0 pts (projected 25.5 MORE) â†’ WIN âœ…         â”‚ â”‚
â”‚  â”‚    - Curry: 32.0 pts (projected 28.5 MORE) â†’ WIN âœ…          â”‚ â”‚
â”‚  â”‚    - Durant: DNP (projected 27.5 MORE) â†’ PUSH âž–             â”‚ â”‚
â”‚  â”‚    - Giannis: 13.0 reb (projected 11.5 MORE) â†’ WIN âœ…        â”‚ â”‚
â”‚  â”‚    - Luka: 7.0 ast (projected 8.5 MORE) â†’ LOSS âŒ            â”‚ â”‚
â”‚  â”‚    - Jokic: 29.0 pts (projected 26.5 MORE) â†’ WIN âœ…          â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ 3. Update pick statuses                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RE-CALCULATE WITH ACTUAL RESULTS                   â”‚
â”‚                     payoutCalculator.ts                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Original: 6 picks                                            â”‚ â”‚
â”‚  â”‚ After evaluation:                                            â”‚ â”‚
â”‚  â”‚   - 4 wins                                                   â”‚ â”‚
â”‚  â”‚   - 1 loss                                                   â”‚ â”‚
â”‚  â”‚   - 1 push                                                   â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚ Power Play Result:                                           â”‚ â”‚
â”‚  â”‚   - Has loss â†’ 0x payout â†’ $0.00                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UPDATE USER BALANCE                          â”‚
â”‚                   Payout: $0.00 (lost $10 entry)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Example Scenarios

### Scenario 1: Perfect Power Play (6/6 Wins)

```
User Submission:
  â”œâ”€ 6 picks
  â”œâ”€ Play Type: Power
  â”œâ”€ Entry: $10
  â””â”€ Potential: $375 (37.5x)

Game Results:
  â”œâ”€ All 6 picks: WIN âœ…
  â””â”€ No pushes

Final Calculation:
  â”œâ”€ Active picks: 6
  â”œâ”€ All wins: true
  â”œâ”€ Multiplier: 37.5x
  â””â”€ Payout: $375.00 ðŸ’°
```

### Scenario 2: Power Play with Push (5/5 Wins + 1 Push)

```
User Submission:
  â”œâ”€ 6 picks
  â”œâ”€ Play Type: Power
  â”œâ”€ Entry: $10
  â””â”€ Potential: $375 (37.5x)

Game Results:
  â”œâ”€ 5 picks: WIN âœ…
  â””â”€ 1 pick: PUSH âž– (DNP)

Final Calculation:
  â”œâ”€ Remove push
  â”œâ”€ Active picks: 5
  â”œâ”€ All wins: true
  â”œâ”€ Multiplier: 20x (5-pick payout)
  â””â”€ Payout: $200.00 ðŸ’°
```

### Scenario 3: Flex Play with Mixed Results

```
User Submission:
  â”œâ”€ 6 picks
  â”œâ”€ Play Type: Flex
  â”œâ”€ Entry: $10
  â””â”€ Potential: $250 (25x for 6/6)

Game Results:
  â”œâ”€ 4 picks: WIN âœ…
  â”œâ”€ 1 pick: LOSS âŒ
  â””â”€ 1 pick: PUSH âž–

Final Calculation:
  â”œâ”€ Remove push
  â”œâ”€ Active picks: 5
  â”œâ”€ Wins: 4/5 (80%)
  â”œâ”€ Multiplier: 2x (Flex 5-pick, 4/5)
  â””â”€ Payout: $20.00 ðŸ’°
```

### Scenario 4: Power Play Loss

```
User Submission:
  â”œâ”€ 4 picks
  â”œâ”€ Play Type: Power
  â”œâ”€ Entry: $25
  â””â”€ Potential: $250 (10x)

Game Results:
  â”œâ”€ 3 picks: WIN âœ…
  â””â”€ 1 pick: LOSS âŒ

Final Calculation:
  â”œâ”€ Active picks: 4
  â”œâ”€ Has loss: true
  â”œâ”€ Multiplier: 0x (Power Play is all-or-nothing)
  â””â”€ Payout: $0.00 âŒ
```

---

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚
â”‚    React     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. User selects picks
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SelectedPlayersSumm. â”‚
â”‚  - Play type select  â”‚
â”‚  - Entry fee input   â”‚
â”‚  - Payout preview    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Calculate preview
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PayoutCalculator    â”‚
â”‚  - Remove pushes     â”‚
â”‚  - Count wins/losses â”‚
â”‚  - Lookup multiplier â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Display result
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PayoutDisplay      â”‚
â”‚  - Show multiplier   â”‚
â”‚  - Show potential $  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Submit lineup
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend API        â”‚
â”‚  - Save to DB        â”‚
â”‚  - Status: pending   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Games complete
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NBA Stats Service   â”‚
â”‚  - Fetch actual statsâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. Evaluate results
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ResultEvaluator     â”‚
â”‚  - Compare actuals   â”‚
â”‚  - Determine W/L/P   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Recalculate
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PayoutCalculator    â”‚
â”‚  - With real results â”‚
â”‚  - Final multiplier  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 8. Update balance
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend API        â”‚
â”‚  - Credit winnings   â”‚
â”‚  - Update status     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Hierarchy

```
App.tsx
â”œâ”€â”€ ThemeProvider
â”œâ”€â”€ SettingsProvider
â””â”€â”€ Main Container
    â”œâ”€â”€ CategoryFilter
    â”œâ”€â”€ PlayerCardComponent (multiple)
    â”‚   â””â”€â”€ (manages selection state)
    â””â”€â”€ SelectedPlayersSummary
        â”œâ”€â”€ Toggle Button (Activity icon)
        â”œâ”€â”€ Summary Panel
        â”‚   â”œâ”€â”€ Play Type Selector
        â”‚   â”‚   â”œâ”€â”€ [Power Play] button
        â”‚   â”‚   â””â”€â”€ [Flex Play] button
        â”‚   â”œâ”€â”€ PayoutDisplay
        â”‚   â”‚   â”œâ”€â”€ Multiplier (37.5x)
        â”‚   â”‚   â”œâ”€â”€ Potential Payout ($375.00)
        â”‚   â”‚   â””â”€â”€ Pick Count (5 picks)
        â”‚   â”œâ”€â”€ Player List
        â”‚   â”‚   â””â”€â”€ (map selectedPlayers)
        â”‚   â”œâ”€â”€ Clear All Button
        â”‚   â””â”€â”€ Submission Form
        â”‚       â”œâ”€â”€ Entry Fee Input
        â”‚       â”œâ”€â”€ Email Input
        â”‚       â””â”€â”€ Submit Button
        â””â”€â”€ (uses payoutCalculator.ts)
```

---

## State Management

```
App.tsx State:
  â”œâ”€â”€ selectedPlayers: SelectedPlayer[]
  â””â”€â”€ setSelectedPlayers: (players) => void

SelectedPlayersSummary State:
  â”œâ”€â”€ isOpen: boolean
  â”œâ”€â”€ hasManuallyClosedWithPlayers: boolean
  â”œâ”€â”€ playType: 'power' | 'flex'
  â””â”€â”€ formData: { entryFee: string, email: string }

Computed Values:
  â”œâ”€â”€ payoutResult: useMemo(() => calculatePayout(...))
  â””â”€â”€ multiplier, payoutAmount from payoutResult
```

---

## Key Integration Points

1. **Player Selection** â†’ `App.tsx`
   - User clicks More/Less on PlayerCardComponent
   - Updates `selectedPlayers` state

2. **Payout Preview** â†’ `SelectedPlayersSummary.tsx`
   - useMemo hook watches selectedPlayers, playType, entryAmount
   - Calls `calculatePayout()` on changes

3. **Form Submission** â†’ `SelectedPlayersSummary.tsx`
   - Packages picks + payout data
   - Sends to backend API

4. **Result Evaluation** â†’ `resultEvaluator.ts`
   - Fetches actual game stats
   - Updates pick statuses
   - Triggers final payout calculation

5. **Balance Update** â†’ Backend
   - Credits winnings to user account
   - Updates lineup status to 'complete'

---

**This flow ensures accurate, real-time payout calculations from pick selection to final payout!**
